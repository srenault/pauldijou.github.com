<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="no-cache" http-equiv="pragma">
    <meta content="no-cache" http-equiv="cache-control">
    <meta content="0" http-equiv="expires">
    <title>
      Paul Dijou
    </title>
    <link href="http://pauldijou.fr/images/favicon.ico" rel="shortcut icon" type="image/png">
    <link href="http://pauldijou.fr/stylesheets/main.min.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400' rel='stylesheet' type='text/css'>
    <!--[if lt IE 8]>
      <link href="http://pauldijou.fr/stylesheets/ie.css" media="screen, projection" rel="stylesheet" type="text/css">
    <![endif]-->
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-25058935-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <header class="menu">
      <div class="container">
        <div class="row">
          <div class="col-xs-2">
            <a href="/">
              <span class="fa fa-home fa-2x fa-fw"></span>
              <span class="nav-label">
                Home
              </span>
            </a>
          </div>
          <div class="col-xs-2">
            <a href="/blog/">
              <span class="fa fa-coffee fa-2x fa-fw"></span>
              <span class="nav-label">
                Blog
              </span>
            </a>
          </div>
          <div class="col-xs-2">
            <a href="/resume/">
              <span class="fa fa-code fa-2x fa-fw"></span>
              <span class="nav-label">
                Resume
              </span>
            </a>
          </div>
          <div class="col-xs-2">
            <a href="/projects/">
              <span class="fa fa-flask fa-2x fa-fw"></span>
              <span class="nav-label">
                Projects
              </span>
            </a>
          </div>
          <div class="col-xs-2">
            <a href="/about/">
              <span class="fa fa-user fa-2x fa-fw"></span>
              <span class="nav-label">
                About
              </span>
            </a>
          </div>
          <div class="col-xs-2">
            <a href="/contact/">
              <span class="fa fa-envelope fa-2x fa-fw"></span>
              <span class="nav-label">
                Contact
              </span>
            </a>
          </div>
        </div>
      </div>
    </header>
    <div class="container">
      <article class="post">
        <h2>
          <a href="/blog/2012/05/08/jsf-bootstrap-render-all/">
            JSF, Bootstrap and calling render=@all
          </a>
        </h2>
        <div class="meta">
          Posted by
          <span class="authors"> Paul Dijou</span>
          on
          <span class="date">May 08, 2012</span>
          |
          <span class="fa fa-comments fa-fw"></span>
           <a href="http://pauldijou.fr/blog/2012/05/08/jsf-bootstrap-render-all/#disqus_thread" data-disqus-identifier="07ba810e7e93243e084fcbd3fc31c56f578b9c12">Comments</a>
          |
          <span class="fa fa-pencil-square-o fa-fw"></span>
          <a href="https://github.com/pauldijou/pauldijou.github.com/edit/develop/blog/2012-05-08-jsf-bootstrap-render-all.md" target="_blank">Improve this article</a>
        </div>
        <div class="content">
          <h3 id="the-problem">The problem</h3>
          
          <p>So, the other day, I was playing with <a href="http://twitter.github.com/bootstrap/index.html">Twitter Bootstrap</a> on a JSF application. Everything was fine until I decide to use a <code>render="@all"</code> somewhere in the page in order to refresh all my components after quite an heavy operation. Working fine.</p>
          
          <p>But Bootstrap was no longer fully healthy. The CSS and design were ok, but the JavaScript was all broken : nearly all effects didn't appear anymore. It was a bit strange so I hit F5 and everything was fine, all JavaScript events were back. But the moment my <code>render="@all"</code> was called, they disappear again.</p>
          
          <h3 id="why">Why?</h3>
          
          <p>After some investigations, the reason was that Bootstrap calls a JavaScript function that will attach most of its events to the <code>&lt;body&gt;</code> when the HTML DOM is ready. Its doing so in order to catch all user interactions when they bubble up to the <code>&lt;body&gt;</code> tag which wrap the whole page. With that, you can use Ajax as much as you want and update your DOM since there is no event attach to a particular HTML tag, they are all in the <code>&lt;body&gt;</code> tag.</p>
          
          <p>That's really good but that's also the reason of the problem. I said Ajax is always fine, and it's true as long as you don't touch the @&lt;body&gt;@ tag. The moment you update this tag, it will probably be reset to it's initial state, without any JavaScript event, and since the Bootstrap JavaScript function is only called once when the DOM is ready the first time, JavaScript events will not come back. Guess what, <code>render="@all"</code> will render your <code>&lt;h:body&gt;</code> and so will broke all Bootstrap JavaScript events.</p>
          
          <h3 id="a-workaround">A workaround</h3>
          
          <p>The true solution would be to call the Bootstrap JavaScript function after each <code>render="@all"</code> in order to attach all JavaScript events again. But since I have no idea how to do that right now, I have chosen to use an easier workaround.</p>
          
          <p>Just wrapping your whole page in a JSF panel and render it instead of <code>render="@all"</code> should be enough in most use case. It is not exactly the same behaviour, but in most case, when calling <code>render="@all"</code>, what you really want is just refreshing your whole page using Ajax. For example:</p>
          
          <pre><code class="language-markup">&lt;!DOCTYPE html&gt;&#x000A;&lt;html lang="en-US"&#x000A;      xmlns="http://www.w3.org/1999/xhtml"&#x000A;      xmlns:h="http://java.sun.com/jsf/html"&#x000A;      xmlns:f="http://java.sun.com/jsf/core"&#x000A;      xmlns:ui="http://java.sun.com/jsf/facelets"&gt;&#x000A;&lt;h:head&gt;&#x000A;    &lt;title&gt;Site title&lt;/title&gt;&#x000A;&lt;/h:head&gt;&#x000A;&lt;h:body&gt;&#x000A;    &lt;h:panelGroup id="all"&gt;&#x000A;        ... your code...&#x000A;    &lt;/h:panelGroup&gt;&#x000A;&lt;/h:body&gt;&#x000A;&lt;/html&gt;&#x000A;</code></pre>
          
          <p>And replace all your <code>render="@all"</code> with <code>render="all"</code>.</p>
        </div>
        <div class="footer">
          <span class="fa fa-link fa-fw"></span>
          <a href="/blog/2012/05/08/jsf-bootstrap-render-all/">Permalink</a>
          |
          <span class="fa fa-comments fa-fw"></span>
           <a href="http://pauldijou.fr/blog/2012/05/08/jsf-bootstrap-render-all/#disqus_thread" data-disqus-identifier="07ba810e7e93243e084fcbd3fc31c56f578b9c12">Comments</a>
          |
          <span class="fa fa-pencil-square-o fa-fw"></span>
          <a href="https://github.com/pauldijou/pauldijou.github.com/edit/develop/blog/2012-05-08-jsf-bootstrap-render-all.md" target="_blank">Improve this article</a>
          |
          <span class="tags">
            <span class="fa fa-tags fa-fw"></span>
            Tags :
            <a class="tag label label-default" href="/blog/tags/jsf/">jsf</a>
            <a class="tag label label-default" href="/blog/tags/bootstrap/">bootstrap</a>
          </span>
        </div>
        <div class="pagination">
          <div class="row">
            <div class="col-xs-6">
              <a class="button block previous disabled" href="#">Previous</a>
            </div>
            <div class="col-xs-6">
              <a class="button block next" href="/blog/2012/08/01/news-richfaces-cdk/">Next</a>
            </div>
          </div>
        </div>
        <div class="comments">
          
                      <div id="disqus_thread"></div>
                      <script type="text/javascript">
                      var disqus_shortname = 'pauldijou';
                      var disqus_url = "http://pauldijou.fr/blog/2012/05/08/jsf-bootstrap-render-all/";
                      var disqus_developer = null;
                      var disqus_identifier = "07ba810e7e93243e084fcbd3fc31c56f578b9c12";
                      (function() {
                        var dsq = document.createElement("script"); dsq.type = "text/javascript"; dsq.async = true;
                        dsq.src = "http://pauldijou.disqus.com/embed.js";
                        (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
                      })();
                      </script>
                      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=pauldijou">comments powered by Disqus.</a></noscript>
        </div>
      </article>
      
                  <script type="text/javascript">
                  var disqus_shortname = 'pauldijou';
                  (function () {
                    var s = document.createElement('script'); s.async = true;
                    s.src = "http://disqus.com/forums/pauldijou/count.js";
                    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
                  }());
                  </script>
    </div>
    <script src="http://pauldijou.fr/javascripts/main.min.js" type="text/javascript"></script>
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
  </body>
</html>
