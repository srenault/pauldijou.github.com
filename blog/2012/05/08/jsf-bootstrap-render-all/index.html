<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <meta charset='utf-8' />
    <meta content='width=device-width, initial-scale=1.0' name='viewport' />
    <meta content='no-cache' http-equiv='pragma' />
    <meta content='no-cache' http-equiv='cache-control' />
    <meta content='0' http-equiv='expires' />
    <title>
      Paul Dijou / JSF, Bootstrap and calling render=@all
    </title>
    <link href='http://pauldijou.fr/stylesheets/style.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <link href='http://pauldijou.fr/stylesheets/bootstrap.min.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <link href='http://pauldijou.fr/stylesheets/bootstrap-responsive.min.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <link href='http://pauldijou.fr/stylesheets/override.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <link href='http://pauldijou.fr/stylesheets/print.css' media='print' rel='stylesheet' type='text/css' />
    <link href='http://pauldijou.fr/stylesheets/prettify.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <!--[if lt IE 8]>
      <link href='http://pauldijou.fr/stylesheets/ie.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <![endif]-->
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js' type='text/javascript'></script>
    <script src='http://pauldijou.fr/javascripts/bootstrap.min.js' type='text/javascript'></script>
    <script src='http://pauldijou.fr/javascripts/prettify.js' type='text/javascript'></script>
    <script src='http://pauldijou.fr/javascripts/main.js' type='text/javascript'></script>
    <!--[if lt IE 9]>
      <script src='//html5shim.googlecode.com/svn/trunk/html5.js' type='text/javascript'></script>
    <![endif]-->
  </head>
  <body data-offset='60' data-spy='scroll' data-target='.spynav'>
    <header>
  <a class='github-fork  hidden-tablet hidden-phone' href='http://github.com/pauldijou' target='_blank'>
    <img alt='Fork me on GitHub' src='https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png' style='position:fixed;top:0;left:0;border:0;z-index:5000' />
  </a>
  <div class='navbar navbar-fixed-top'>
    <div class='navbar-inner'>
      <div class='container'>
        <a class='btn btn-navbar' data-target='.nav-collapse' data-toggle='collapse'>
          <span class='icon-bar'></span>
          <span class='icon-bar'></span>
          <span class='icon-bar'></span>
        </a>
        <a class='brand' href='/'>
          Paul Dijou
        </a>
        <div class='nav-collapse'>
          <ul class='nav'>
            <li>
              <a href='/'>Home</a>
            </li>
            <li>
              <a href='/blog/'>Blog</a>
            </li>
            <li>
              <a href='/resume/'>Resume</a>
            </li>
            <li>
              <a href='/projects/'>Projects</a>
            </li>
            <li>
              <a href='/about/'>About</a>
            </li>
            <li>
              <a href='/todo/'>TODO</a>
            </li>
            <li>
              <a href='/contact/'>Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <script type='text/javascript'>
    //<![CDATA[
      $(document).ready(function() {
        var indexOfSharp = window.location.pathname.indexOf('#');
        var pathname = indexOfSharp > 0 ? window.location.pathname.substring(0, indexOfSharp) : window.location.pathname;
        $("body > header > .navbar a[href='"+pathname+"']").closest("li").addClass("active");
      });
    //]]>
  </script>
</header>
<div class='container' id='container'>
  <div class='row'>
    <div class='span12'>
      <div class='row'>
  <div class='span9'>
    <article class='post'>
  <ul class='pager visible-desktop' style='float:right;'>
    <li>
      <a href='/blog/2012/08/01/news-richfaces-cdk/'>Next</a>
    </li>
  </ul>
  <h2>
    <a href='/blog/2012/05/08/jsf-bootstrap-render-all/'>
      JSF, Bootstrap and calling render=@all
    </a>
  </h2>
  <div class='meta'>
    Posted by
    <span class='authors'> Paul Dijou</span>
    on
    <span class='date'>May 08, 2012</span>
    |
     <a href="http://pauldijou.fr/blog/2012/05/08/jsf-bootstrap-render-all/#disqus_thread" data-disqus-identifier="07ba810e7e93243e084fcbd3fc31c56f578b9c12">Comments</a>
  </div>
  <div class='content'>
    <h3>The problem</h3>
<p>So, the other day, I was playing with <a href="http://twitter.github.com/bootstrap/index.html">Twitter Bootstrap</a> on a <span class="caps">JSF</span> application. Everything was fine until I decide to use a <code>render="@all"</code> somewhere in the page in order to refresh all my components after quite an heavy operation. Working fine.</p>
<p>But Bootstrap was no longuer fully healthy. The <span class="caps">CSS</span> and design were ok, but the Javascript was all broken : nearly all effects didn&#8217;t appear anymore. It was a bit strange so I hit F5 and everything was fine, all Javascript events were back. But the moment my <code>render="@all"</code> was called, they dissapear again.</p>
<h3>Why?</h3>
<p>After some investigations, the reason was that Bootstrap calls a Javascript function that will attach most of its events to the <code>&lt;body&gt;</code> when the <span class="caps">HTML</span> <span class="caps">DOM</span> is ready. Its doing so in order to catch all user interactions when they bubble up to the <code>&lt;body&gt;</code> tag which wrap the whole page. With that, you can use Ajax as much as you want and update your <span class="caps">DOM</span> since there is no event attach to a particular <span class="caps">HTML</span> tag, they are all in the <code>&lt;body&gt;</code> tag.</p>
<p>That&#8217;s really good but that&#8217;s also the reason of the problem. I said Ajax is always fine, and it&#8217;s true as long as you don&#8217;t touch the <code>&lt;body&gt;</code> tag. The moment you update this tag, it will probably be reset to it&#8217;s initial state, without any Javascript event, and since the Bootstrap Javascript function is only called once when the <span class="caps">DOM</span> is ready the first time, Javascript events will not come back. Guess what, <code>render="@all"</code> will render your <code>&lt;h:body&gt;</code> and so will broke all Bootstrap Javascipt events.</p>
<h3>A workaround</h3>
<p>The true solution would be to call the Bootstrap Javascript function after each <code>render="@all"</code> in order to attach all Javascript events again. But since I have no idea how to do that right now, I have choosen to use an easier workaround.</p>
<p>Just wrapping your whole page in a <span class="caps">JSF</span> panel and render it instead of <code>render="@all"</code> should be enough in most use case. It is not exactly the same behaviour, but in most case, when calling <code>render="@all"</code>, what you really want is just refreshing your whole page using Ajax. For example:</p>
<pre class="prettyprint linenums"><code class="prettyprint linenums">&lt;!DOCTYPE html&gt;&#x000A;&lt;html lang="en-US"&#x000A;      xmlns="http://www.w3.org/1999/xhtml"&#x000A;      xmlns:h="http://java.sun.com/jsf/html"&#x000A;      xmlns:f="http://java.sun.com/jsf/core"&#x000A;      xmlns:ui="http://java.sun.com/jsf/facelets"&gt;&#x000A;&lt;h:head&gt;&#x000A;    &lt;title&gt;Site title&lt;/title&gt;&#x000A;&lt;/h:head&gt;&#x000A;&lt;h:body&gt;&#x000A;    &lt;h:panelGroup id="all"&gt;&#x000A;        ... your code...&#x000A;    &lt;/h:panelGroup&gt;&#x000A;&lt;/h:body&gt;&#x000A;&lt;/html&gt;</code></pre>
<p>And replace all your <code>render="@all"</code> with <code>render="all"</code>.</p>
  </div>
  <div class='footer'>
    <a href='/blog/2012/05/08/jsf-bootstrap-render-all/'>Permalink</a>
    |
     <a href="http://pauldijou.fr/blog/2012/05/08/jsf-bootstrap-render-all/#disqus_thread" data-disqus-identifier="07ba810e7e93243e084fcbd3fc31c56f578b9c12">Comments</a>
    |
    <span class='tags'>
      <i class='icon-tags'></i>
      Tags :
      <a class='tag' href='/blog/tags/en/'>en</a>
      <a class='tag' href='/blog/tags/jsf/'>jsf</a>
      <a class='tag' href='/blog/tags/bootstrap/'>bootstrap</a>
    </span>
  </div>
</article>
    
                <script type="text/javascript">
                var disqus_shortname = 'pauldijou';
                (function () {
                  var s = document.createElement('script'); s.async = true;
                  s.src = "http://disqus.com/forums/pauldijou/count.js";
                  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
                }());
                </script>
    <div class='visible-desktop'>
      <ul class='pager'>
        <li class='next'>
          <a href='/blog/2012/08/01/news-richfaces-cdk/'>Next: News about RichFaces CDK</a>
        </li>
      </ul>
    </div>
    <div class='hidden-desktop'>
      <ul class='pager'>
        <li class='next'>
          <a href='/blog/2012/08/01/news-richfaces-cdk/'>Next</a>
        </li>
      </ul>
    </div>
    <aside class='visible-phone'>
      <ul class='nav nav-list well'>
        <li class='nav-header'>
          Tag Cloud
        </li>
        <li>
          <div class='tag-cloud'>
            <span class='tag tag-3'>
              <a href='http://pauldijou.fr/blog/tags/bootstrap/'>bootstrap</a>
            </span>
            <span class='tag tag-0'>
              <a href='http://pauldijou.fr/blog/tags/cdk/'>cdk</a>
            </span>
            <span class='tag tag-6'>
              <a href='http://pauldijou.fr/blog/tags/en/'>en</a>
            </span>
            <span class='tag tag-3'>
              <a href='http://pauldijou.fr/blog/tags/fr/'>fr</a>
            </span>
            <span class='tag tag-0'>
              <a href='http://pauldijou.fr/blog/tags/jquery/'>jquery</a>
            </span>
            <span class='tag tag-0'>
              <a href='http://pauldijou.fr/blog/tags/jsf/'>jsf</a>
            </span>
            <span class='tag tag-3'>
              <a href='http://pauldijou.fr/blog/tags/richfaces/'>richfaces</a>
            </span>
          </div>
        </li>
      </ul>
      <div>
        &nbsp;
      </div>
      <div class='social-menu'>
  <ul class='nav nav-list'>
    <li class='nav-header'>Did you like it? Please, share it!</li>
    <li class='social-item twitter'>
      <a class='twitter-share-button' data-size='large' href='https://twitter.com/share'>Tweet</a>
    </li>
    <li class='social-item google-plus'>
      <div class='g-plusone' data-annotation='inline' data-with='200'></div>
    </li>
    <li class='social-item dzone'>
      <script type='text/javascript'>
        var dzone_url = 'http://google.com';
        var dzone_title = 'Google';
        var dzone_blurb = 'Google';
        var dzone_style = '2';
      </script>
      <script src='http://widgets.dzone.com/links/widgets/zoneit.js' type='text/javascript'></script>
    </li>
    <li class='social-item reddit'>
      <a href='http://www.reddit.com/submit' onclick="window.location = 'http://www.reddit.com/submit?url=' + encodeURIComponent(window.location); return false">
        <img alt='Submit to reddit' border='0' src='http://www.reddit.com/static/spreddit12.gif' />
      </a>
    </li>
    <li class='social-item delicious'>
      <a href='http://www.delicious.com/save' onclick="window.open('http://www.delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title), 'delicious','toolbar=no,width=550,height=550'); return false;">
        <img src='/images/icons/delicious_32.png' />
        Delicious Bookmark
      </a>
    </li>
  </ul>
</div>
<script type='text/javascript'>
  //<![CDATA[
    var page_url = location.href;
    
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
    
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
  //]]>
</script>
    </aside>
    <div class='comments'>
      
                  <div id="disqus_thread"></div>
                  <script type="text/javascript">
                  var disqus_shortname = 'pauldijou';
                  var disqus_url = "http://pauldijou.fr/blog/2012/05/08/jsf-bootstrap-render-all/";
                  var disqus_developer = null;
                  var disqus_identifier = "07ba810e7e93243e084fcbd3fc31c56f578b9c12";
                  (function() {
                    var dsq = document.createElement("script"); dsq.type = "text/javascript"; dsq.async = true;
                    dsq.src = "http://pauldijou.disqus.com/embed.js";
                    (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
                  })();
                  </script>
                  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=pauldijou">comments powered by Disqus.</a></noscript>
    </div>
  </div>
  <div class='span3'>
    <aside class='hidden-phone'>
      <ul class='nav nav-list well'>
        <li class='nav-header'>
          Tag Cloud
        </li>
        <li>
          <div class='tag-cloud'>
            <span class='tag tag-3'>
              <a href='http://pauldijou.fr/blog/tags/bootstrap/'>bootstrap</a>
            </span>
            <span class='tag tag-0'>
              <a href='http://pauldijou.fr/blog/tags/cdk/'>cdk</a>
            </span>
            <span class='tag tag-6'>
              <a href='http://pauldijou.fr/blog/tags/en/'>en</a>
            </span>
            <span class='tag tag-3'>
              <a href='http://pauldijou.fr/blog/tags/fr/'>fr</a>
            </span>
            <span class='tag tag-0'>
              <a href='http://pauldijou.fr/blog/tags/jquery/'>jquery</a>
            </span>
            <span class='tag tag-0'>
              <a href='http://pauldijou.fr/blog/tags/jsf/'>jsf</a>
            </span>
            <span class='tag tag-3'>
              <a href='http://pauldijou.fr/blog/tags/richfaces/'>richfaces</a>
            </span>
          </div>
        </li>
      </ul>
      <div>
        &nbsp;
      </div>
      <div class='follow-scroll'>
        <div class='social-menu'>
  <ul class='nav nav-list'>
    <li class='nav-header'>Did you like it? Please, share it!</li>
    <li class='social-item twitter'>
      <a class='twitter-share-button' data-size='large' href='https://twitter.com/share'>Tweet</a>
    </li>
    <li class='social-item google-plus'>
      <div class='g-plusone' data-annotation='inline' data-with='200'></div>
    </li>
    <li class='social-item dzone'>
      <script type='text/javascript'>
        var dzone_url = 'http://google.com';
        var dzone_title = 'Google';
        var dzone_blurb = 'Google';
        var dzone_style = '2';
      </script>
      <script src='http://widgets.dzone.com/links/widgets/zoneit.js' type='text/javascript'></script>
    </li>
    <li class='social-item reddit'>
      <a href='http://www.reddit.com/submit' onclick="window.location = 'http://www.reddit.com/submit?url=' + encodeURIComponent(window.location); return false">
        <img alt='Submit to reddit' border='0' src='http://www.reddit.com/static/spreddit12.gif' />
      </a>
    </li>
    <li class='social-item delicious'>
      <a href='http://www.delicious.com/save' onclick="window.open('http://www.delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title), 'delicious','toolbar=no,width=550,height=550'); return false;">
        <img src='/images/icons/delicious_32.png' />
        Delicious Bookmark
      </a>
    </li>
  </ul>
</div>
<script type='text/javascript'>
  //<![CDATA[
    var page_url = location.href;
    
    !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
    
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
  //]]>
</script>
      </div>
    </aside>
  </div>
</div>
    </div>
  </div>
</div>
<hr />
<footer class='container'>
  <div class='row'>
    <div class='hidden-phone'>
      <div class='span2'>
        <ul class='nav nav-list'>
          <li class='nav-header'>
            Powered with
          </li>
          <li>
            <a href='http://awestruct.org/' target='_blank'>Awestruct</a>
          </li>
          <li>
            <a href='http://twitter.github.com/bootstrap/' target='_blank'>Bootstrap</a>
          </li>
          <li>
            <a href='http://github.com/' target='_blank'>GitHub</a>
          </li>
          <li>
            <a href='http://haml-lang.com/docs/yardoc/file.HAML_REFERENCE.html' target='_blank'>HAML</a>
          </li>
          <li>
            <a href='http://redcloth.org/textile/' target='_blank'>Textile</a>
          </li>
        </ul>
      </div>
    </div>
    <div class='span2'>
      <ul class='nav nav-list'>
        <li class='nav-header'>
          Always connected!
        </li>
        <li>
          <a href='https://twitter.com/#!/paul_dijou' target='_blank'>Twitter</a>
        </li>
        <li>
          <a href='https://github.com/pauldijou' target='_blank'>GitHub</a>
        </li>
        <li>
          <a href='https://plus.google.com/u/0/102994553784447043819' target='_blank'>Google+</a>
        </li>
        <li>
          <a href='http://klout.com/#/paul_dijou' target='_blank'>Klout</a>
        </li>
        <li>
          <a href='http://feeds2.feedburner.com/pauldijou' target='_blank'>RSS</a>
        </li>
      </ul>
    </div>
  </div>
</footer>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount','UA-25058935-1']);
    _gaq.push(['_trackPageview']);
    (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
</html>
