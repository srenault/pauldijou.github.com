<?xml version='1.0' encoding='utf-8' ?>
<feed xml:lang='en-US' xmlns='http://www.w3.org/2005/Atom'>
  <id>http://pauldijou.github.com/</id>
  <title>Paul Dijou Blog</title>
  <updated>2012-08-01T00:00:00Z</updated>
  <link href='http://pauldijou.github.com/feed.atom' rel='self' type='application/atom+xml' />
  <link href='http://pauldijou.github.com/' rel='alternate' type='text/html' />
  <entry>
    <id>http://pauldijou.github.com/blog/2012/08/01/news-richfaces-cdk.html</id>
    <title>News about RichFaces CDK</title>
    <updated>2012-08-01T00:00:00Z</updated>
    <published>2012-08-01T00:00:00Z</published>
    <link href='http://pauldijou.github.com/blog/2012/08/01/news-richfaces-cdk.html' rel='alternate' type='text/html' />
    <summary>
      Table of Content

	English version
	Version Francaise

RichFaces CDK new features
As the RichFaces Bootstrap project grows, we need more tools to achieve new goals and keep the code clean and readable. More tools means a stronger CDK and here are the last features.
Fragments are small portions of code inside the template that are defined outside of the main implementation but can be called inside it or inside other fragments or even inside itself! Say hello to recursion in RichFaces CDK templates. In term of Java, fragments are methods. So when you write a fragment, it will generates a Java method in the final...
    </summary>
    <content type='html'>
      &lt;h3&gt;Table of Content&lt;/h3&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;a href=&quot;#news-richfaces-cdk-en&quot;&gt;English version&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;#news-richfaces-cdk-fr&quot;&gt;Version Francaise&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;news-richfaces-cdk-en&quot;&gt;RichFaces &lt;span class=&quot;caps&quot;&gt;CDK&lt;/span&gt; new features&lt;/h3&gt;
&lt;p&gt;As the RichFaces Bootstrap project grows, we need more tools to achieve new goals and keep the code clean and readable. More tools means a stronger &lt;span class=&quot;caps&quot;&gt;CDK&lt;/span&gt; and here are the last features.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Fragments&lt;/strong&gt; are small portions of code inside the template that are defined outside of the main implementation but can be called inside it or inside other fragments or even inside itself! Say hello to recursion in RichFaces &lt;span class=&quot;caps&quot;&gt;CDK&lt;/span&gt; templates. In term of Java, fragments are methods. So when you write a fragment, it will generates a Java method in the final renderer. Knowing that makes fragments really easy to understand and to use. See the &lt;a href=&quot;https://issues.jboss.org/browse/RF-12226&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JIRA&lt;/span&gt; issue 12226&lt;/a&gt; for a fully explained example.&lt;/p&gt;
&lt;div class=&quot;alert alert-info&quot;&gt;&lt;strong&gt;Pro tip&lt;/strong&gt; Notice that in the signature of the generated Java method, 3 arguments are always passed without having to specify them inside the template : ResponseWriter, FacesContext and UIComponent.&lt;/div&gt;
&lt;div class=&quot;alert&quot;&gt;&lt;strong&gt;Warning&lt;/strong&gt; Currently, if you want to use a fragment1 inside a fragment2, you need to write fragment1 first in your template so its signature has been parsed before calling it in fragment2. Problem is reported in &lt;a href=&quot;https://issues.jboss.org/browse/RF-12326&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JIRA&lt;/span&gt; issue 12326&lt;/a&gt;.&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;cc:renderFacet&lt;/strong&gt; is a new tag you can use inside a &lt;span class=&quot;caps&quot;&gt;CDK&lt;/span&gt; template, equivalent of the same tag from &lt;span class=&quot;caps&quot;&gt;JSF&lt;/span&gt; composite component. Its usage is quite straightforward: it will render the facet that you will specify in the &lt;code&gt;name&lt;/code&gt; attribute. If you put some content inside the tag, it will be used as default value in case the facet is missing. See &lt;a href=&quot;https://issues.jboss.org/browse/RF-12260&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JIRA&lt;/span&gt; issue 12260&lt;/a&gt; for full description.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;varStatus&lt;/strong&gt; is a new attribute for the &lt;strong&gt;c:forEach&lt;/strong&gt; &lt;span class=&quot;caps&quot;&gt;CDK&lt;/span&gt; tag. It will perform the exact same thing as the one in the original &lt;strong&gt;c:forEach&lt;/strong&gt; tag, giving you more tools inside a forEach loop. See &lt;a href=&quot;https://issues.jboss.org/browse/RF-12232&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JIRA&lt;/span&gt; issue 12232&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;wildcard&lt;/strong&gt; can now be used inside &lt;strong&gt;cdk:passThrough&lt;/strong&gt; and &lt;strong&gt;cdk:passThroughWithExclusions&lt;/strong&gt; attributes in order to pass all attributes starting with the same prefix. Especially useful with JavaScript events &lt;code&gt;on*&lt;/code&gt;. Wildcard can be use with attribute mapping like &lt;code&gt;onkey*:oninputkey*&lt;/code&gt;. See &lt;a href=&quot;https://issues.jboss.org/browse/RF-12200&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JIRA&lt;/span&gt; issue 12200&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;component&lt;/strong&gt; variable is now directly casted to the correct class based on &lt;code&gt;cdk:class&lt;/code&gt; tag in the template. You will no longer need to write explicitly the cast inside 95% of your templates. Enjoy less verbose code and see &lt;a href=&quot;https://issues.jboss.org/browse/RF-12248&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JIRA&lt;/span&gt; issue 12248&lt;/a&gt; for more details.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;In general&lt;/strong&gt;, &lt;span class=&quot;caps&quot;&gt;CDK&lt;/span&gt; has been improved to be more type-safe which allows to catch more issues at compilte-time.&lt;/p&gt;
&lt;h3&gt;What&amp;#8217;s next?&lt;/h3&gt;
&lt;p&gt;There are still a few points undone in the &lt;a href=&quot;https://community.jboss.org/wiki/CDKWish-List&quot;&gt;&lt;span class=&quot;caps&quot;&gt;CDK&lt;/span&gt; wish-list&lt;/a&gt; and I hope some of them will be realized. One of the most important is probably generating methods from interfaces! See &lt;a href=&quot;https://issues.jboss.org/browse/RF-12339&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JIRA&lt;/span&gt; issue 12339&lt;/a&gt; to fully understand the concept.&lt;/p&gt;
&lt;p&gt;In another topic, another post will follow next week to talk about what&amp;#8217;s new in &lt;a href=&quot;http://bootstrap-richfaces.rhcloud.com&quot;&gt;RichFaces Bootstrap project&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;news-richfaces-cdk-fr&quot;&gt;Les nouvelles fonctionnalités du &lt;span class=&quot;caps&quot;&gt;CDK&lt;/span&gt; RichFaces&lt;/h3&gt;
&lt;p&gt;En même temps que le projet RichFaces Boostrap grandit, le besoin de nouveaux outils pour garder le code propre et lisible se fait sentir. De nouveaux outils signifie un &lt;span class=&quot;caps&quot;&gt;CDK&lt;/span&gt; plus puissant et voici les dernières fonctionnalités ajoutées.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Les fragments&lt;/strong&gt; sont de petites portions de code que vous définissez au sein de votre template, à l&amp;#8217;extérieur de l&amp;#8217;implémentation principale, mais ils peuvent être appelé au sein de celle-ci, ou à l&amp;#8217;intérieur d&amp;#8217;autres fragments, ou au sein d&amp;#8217;eux même ! Dites bonjour à la récursivité dans les templates du &lt;span class=&quot;caps&quot;&gt;CDK&lt;/span&gt; RichFaces. Côté Java, les fragments sont purement et simplement des méthodes. Cela signifie que chaque fois que vous écrivez un fragment dans un template, cela aura pour effet de générer une méthode Java dans le renderer final. En sachant cela, il devient relativement aisé de comprendre et maitriser les fragments. N&amp;#8217;hésitez pas à lire &lt;a href=&quot;https://issues.jboss.org/browse/RF-12226&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JIRA&lt;/span&gt; issue 12226&lt;/a&gt; pour un exemple détaillé.&lt;/p&gt;
&lt;div class=&quot;alert alert-info&quot;&gt;&lt;strong&gt;Pro tip&lt;/strong&gt; Vous remarquerez que la signature de la méthode Java générée comporte 3 paramètres qui sont toujours présents et que vous n&amp;#8217;avez jamais à spécifier dans le template. Il s&amp;#8217;agit de ResponserWriter, FacesContext et UIComponent.&lt;/div&gt;
&lt;div class=&quot;alert&quot;&gt;&lt;strong&gt;Attention&lt;/strong&gt; Actuellement, si vous voulez utiliser un fragment1 à l&amp;#8217;intérieur d&amp;#8217;un fragment2, vous devez écrire fragment1 en premier dans votre template afin que sa signature ait été parsée avant d&amp;#8217;être appelée dans fragment2. Le problème a été reporté dans &lt;a href=&quot;https://issues.jboss.org/browse/RF-12326&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JIRA&lt;/span&gt; issue 12326&lt;/a&gt;.&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;cc:renderFacet&lt;/strong&gt; est une nouvelle balise que vous pouvez utiliser dans les templates &lt;span class=&quot;caps&quot;&gt;CDK&lt;/span&gt; et qui équivaut à la balise du même nom dans les composants composites de &lt;span class=&quot;caps&quot;&gt;JSF&lt;/span&gt;. Son usage est assez évident : elle va générer le facet que vous aurez spécifié via l&amp;#8217;attribut &lt;code&gt;name&lt;/code&gt;. Si vous spécifiez un contenu dans la balise, celui-ci sera utilisé comme valeur par défaut si jamais le facet était absent. Voyez &lt;a href=&quot;https://issues.jboss.org/browse/RF-12260&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JIRA&lt;/span&gt; issue 12260&lt;/a&gt; pour une description complète.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;varStatus&lt;/strong&gt; est un nouvel attribut de la balise &lt;strong&gt;c:forEach&lt;/strong&gt; du &lt;span class=&quot;caps&quot;&gt;CDK&lt;/span&gt;. Il a les mêmes effets que celui de la balise originale &lt;strong&gt;c:forEach&lt;/strong&gt;, vous donnant accès à des nouveaux outils à l&amp;#8217;intérieur d&amp;#8217;une boucle forEach. Voyez &lt;a href=&quot;https://issues.jboss.org/browse/RF-12232&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JIRA&lt;/span&gt; issue 12232&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Les &amp;#8220;wildcards&amp;#8221;&lt;/strong&gt; (= astérisques) peuvent désormais être utilisées dans les attributes &lt;strong&gt;cdk:passThrough&lt;/strong&gt; et &lt;strong&gt;cdk:passThroughWithExclusions&lt;/strong&gt; afin de passer directement tous les attributes commençant avec le même préfixe. Particulièrement utile pour les évènements JavaScript &lt;code&gt;on*&lt;/code&gt;. Les wildcards peuvent bien sur être utilisées dans le cadre d&amp;#8217;un mapping comme &lt;code&gt;onkey*:oninputkey*&lt;/code&gt;. Voyez &lt;a href=&quot;https://issues.jboss.org/browse/RF-12200&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JIRA&lt;/span&gt; issue 12200&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;La variable &lt;strong&gt;component&lt;/strong&gt; au sein des templates est maintenant automatiquement castée dans le bon type en se basant sur la balise &lt;code&gt;cdk:class&lt;/code&gt; du template. Vous n&amp;#8217;aurez plus besoin d&amp;#8217;écrire explicitement ce cast dans 95% de vos templates. Vous apprécierez ainsi un code moins verbeux. Jetez un oeil à &lt;a href=&quot;https://issues.jboss.org/browse/RF-12248&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JIRA&lt;/span&gt; issue 12248&lt;/a&gt; pour plus de détails.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;De manière générale&lt;/strong&gt;, le &lt;span class=&quot;caps&quot;&gt;CDK&lt;/span&gt; a été amélioré pour être encore plus type-safe et ainsi pouvoir détecter d&amp;#8217;éventuels problèmes à la compilation.&lt;/p&gt;
&lt;h3&gt;Et ensuite ?&lt;/h3&gt;
&lt;p&gt;La &lt;a href=&quot;https://community.jboss.org/wiki/CDKWish-List&quot;&gt;liste des souhaits à réaliser&lt;/a&gt; n&amp;#8217;a pas encore été intégralement réalisée et j&amp;#8217;espère que certains le seront très bientôt. L&amp;#8217;un des plus importants est probablement la génération de méthodes dans les renderer ou les composants à partir de nouvelles interfaces qu&amp;#8217;ils étendraient. &lt;a href=&quot;https://issues.jboss.org/browse/RF-12339&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JIRA&lt;/span&gt; issue 12339&lt;/a&gt; décrit le concept dans son intégralité.&lt;/p&gt;
&lt;p&gt;Dans un autre registre, un autre post suivra la semaine prochaine pour vous parler des nouveautés du projet &lt;a href=&quot;http://bootstrap-richfaces.rhcloud.com&quot;&gt;RichFaces Bootstrap&lt;/a&gt;.&lt;/p&gt;
    </content>
  </entry>
  <entry>
    <id>http://pauldijou.github.com/blog/2012/05/08/jsf-bootstrap-render-all.html</id>
    <title>JSF, Bootstrap and calling render=@all</title>
    <updated>2012-05-08T00:00:00Z</updated>
    <published>2012-05-08T00:00:00Z</published>
    <link href='http://pauldijou.github.com/blog/2012/05/08/jsf-bootstrap-render-all.html' rel='alternate' type='text/html' />
    <summary>
      The problem
      So, the other day, I was playing with Twitter Bootstrap on a JSF application. Everything was fine until I decide to use a render="@all" somewhere in the page in order to refresh all my components after quite an heavy operation. Working fine.
      But Bootstrap was no longuer fully healthy. The CSS and design were ok, but the Javascript was all broken : nearly all effects didn&#8217;t appear anymore. It was a bit strange so I hit F5 and everything was fine, all Javascript events were back. But the moment my render="@all" was called, they dissapear again.
      Why?
      After some investigations, the reason...
    </summary>
    <content type='html'>
      &lt;h3&gt;The problem&lt;/h3&gt;
&lt;p&gt;So, the other day, I was playing with &lt;a href=&quot;http://twitter.github.com/bootstrap/index.html&quot;&gt;Twitter Bootstrap&lt;/a&gt; on a &lt;span class=&quot;caps&quot;&gt;JSF&lt;/span&gt; application. Everything was fine until I decide to use a &lt;code&gt;render=&quot;@all&quot;&lt;/code&gt; somewhere in the page in order to refresh all my components after quite an heavy operation. Working fine.&lt;/p&gt;
&lt;p&gt;But Bootstrap was no longuer fully healthy. The &lt;span class=&quot;caps&quot;&gt;CSS&lt;/span&gt; and design were ok, but the Javascript was all broken : nearly all effects didn&amp;#8217;t appear anymore. It was a bit strange so I hit F5 and everything was fine, all Javascript events were back. But the moment my &lt;code&gt;render=&quot;@all&quot;&lt;/code&gt; was called, they dissapear again.&lt;/p&gt;
&lt;h3&gt;Why?&lt;/h3&gt;
&lt;p&gt;After some investigations, the reason was that Bootstrap calls a Javascript function that will attach most of its events to the &lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt; when the &lt;span class=&quot;caps&quot;&gt;HTML&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;DOM&lt;/span&gt; is ready. Its doing so in order to catch all user interactions when they bubble up to the &lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt; tag which wrap the whole page. With that, you can use Ajax as much as you want and update your &lt;span class=&quot;caps&quot;&gt;DOM&lt;/span&gt; since there is no event attach to a particular &lt;span class=&quot;caps&quot;&gt;HTML&lt;/span&gt; tag, they are all in the &lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt; tag.&lt;/p&gt;
&lt;p&gt;That&amp;#8217;s really good but that&amp;#8217;s also the reason of the problem. I said Ajax is always fine, and it&amp;#8217;s true as long as you don&amp;#8217;t touch the &lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt; tag. The moment you update this tag, it will probably be reset to it&amp;#8217;s initial state, without any Javascript event, and since the Bootstrap Javascript function is only called once when the &lt;span class=&quot;caps&quot;&gt;DOM&lt;/span&gt; is ready the first time, Javascript events will not come back. Guess what, &lt;code&gt;render=&quot;@all&quot;&lt;/code&gt; will render your &lt;code&gt;&amp;lt;h:body&amp;gt;&lt;/code&gt; and so will broke all Bootstrap Javascipt events.&lt;/p&gt;
&lt;h3&gt;A workaround&lt;/h3&gt;
&lt;p&gt;The true solution would be to call the Bootstrap Javascript function after each &lt;code&gt;render=&quot;@all&quot;&lt;/code&gt; in order to attach all Javascript events again. But since I have no idea how to do that right now, I have choosen to use an easier workaround.&lt;/p&gt;
&lt;p&gt;Just wrapping your whole page in a &lt;span class=&quot;caps&quot;&gt;JSF&lt;/span&gt; panel and render it instead of &lt;code&gt;render=&quot;@all&quot;&lt;/code&gt; should be enough in most use case. It is not exactly the same behaviour, but in most case, when calling &lt;code&gt;render=&quot;@all&quot;&lt;/code&gt;, what you really want is just refreshing your whole page using Ajax. For example:&lt;/p&gt;
&lt;pre class=&quot;prettyprint linenums&quot;&gt;&lt;code class=&quot;prettyprint linenums&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&amp;#x000A;&amp;lt;html lang=&quot;en-US&quot;&amp;#x000A;      xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&amp;#x000A;      xmlns:h=&quot;http://java.sun.com/jsf/html&quot;&amp;#x000A;      xmlns:f=&quot;http://java.sun.com/jsf/core&quot;&amp;#x000A;      xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot;&amp;gt;&amp;#x000A;&amp;lt;h:head&amp;gt;&amp;#x000A;    &amp;lt;title&amp;gt;Site title&amp;lt;/title&amp;gt;&amp;#x000A;&amp;lt;/h:head&amp;gt;&amp;#x000A;&amp;lt;h:body&amp;gt;&amp;#x000A;    &amp;lt;h:panelGroup id=&quot;all&quot;&amp;gt;&amp;#x000A;        ... your code...&amp;#x000A;    &amp;lt;/h:panelGroup&amp;gt;&amp;#x000A;&amp;lt;/h:body&amp;gt;&amp;#x000A;&amp;lt;/html&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And replace all your &lt;code&gt;render=&quot;@all&quot;&lt;/code&gt; with &lt;code&gt;render=&quot;all&quot;&lt;/code&gt;.&lt;/p&gt;
    </content>
  </entry>
</feed>
